<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Location Logger</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-database-compat.js"></script>

    <!-- FingerprintJS open-source library -->
    <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3.3.0/dist/fp.min.js"></script>
    
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCX7L7R6pwYUvggTGVqFRKqsz8n0NlaXrE",
            authDomain: "infologger-194e5.firebaseapp.com",
            databaseURL: "https://infologger-194e5-default-rtdb.firebaseio.com",
            projectId: "infologger-194e5",
            storageBucket: "infologger-194e5.appspot.com",
            messagingSenderId: "641296174415",
            appId: "1:641296174415:web:a620c0bcabcc3467f0493a"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Get Device Information
        function getDeviceInfo() {
            const userAgent = navigator.userAgent;

            // Detect device type
            const deviceType = /Mobi|Android/i.test(userAgent) ? "Mobile" : "Desktop";

            // Detect operating system
            let os = "Unknown";
            if (/Windows/i.test(userAgent)) os = "Windows";
            else if (/Mac/i.test(userAgent)) os = "macOS";
            else if (/Linux/i.test(userAgent)) os = "Linux";
            else if (/Android/i.test(userAgent)) os = "Android";
            else if (/iPhone|iPad|iPod/i.test(userAgent)) os = "iOS";

            // Get screen resolution
            const screenResolution = `${screen.width}x${screen.height}`;

            // Get language preference
            const language = navigator.language || "Unknown";

            return { deviceType, os, screenResolution, language };
        }

        // Get browser information
        function getBrowserInfo() {
            const browser = {
                name: navigator.appName,
                version: navigator.appVersion,
                engine: navigator.product,
                userAgent: navigator.userAgent
            };

            // Check for more specific browser name and version
            const browserName = /(chrome|firefox|safari|opera|msie|trident)/i.exec(navigator.userAgent);
            if (browserName) {
                browser.name = browserName[0];
                const versionMatch = /(?:chrome|firefox|safari|opera|msie|trident)[/\s](\d+)/.exec(navigator.userAgent);
                if (versionMatch) {
                    browser.version = versionMatch[1];
                }
            }

            return browser;
        }

        // Get Central Time Timestamp
        function getCentralTimeTimestamp() {
            const options = {
                timeZone: "America/Chicago",
                year: "numeric",
                month: "2-digit",
                day: "2-digit",
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit"
            };
            const formatter = new Intl.DateTimeFormat("en-US", options);
            return formatter.format(new Date());
        }

        // Get Local Timestamp and Browser Timezone
        function getLocalTimeInfo() {
            const localTimestamp = new Date().toLocaleString();
            const browserTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

            return { localTimestamp, browserTimezone };
        }

        // Get System Information
        function getSystemInfo() {
            const cpuInfo = navigator.hardwareConcurrency || "Unknown";  // Number of CPU cores
            const ram = navigator.deviceMemory || "Unknown";  // Available RAM (in GB)
            const installedFonts = [];  // Font detection requires additional libraries or manual checks
            const cookiesEnabled = navigator.cookieEnabled ? "Yes" : "No";

            return { cpuInfo, ram, installedFonts, cookiesEnabled };
        }

        // Log visitor information to Firebase
        function logVisitor(visitorData) {
            const dbRef = database.ref('logs');
            dbRef.push(visitorData)
                .then(() => {
                    console.log("Visitor logged successfully with timestamp:", visitorData.timestamp);
                })
                .catch(error => {
                    console.error("Error logging visitor:", error);
                });
        }

        // Fetch location, fingerprint, and system information, then log all together
        function logVisitorData() {
            // Get device, browser, system, and time information
            const deviceInfo = getDeviceInfo();
            const browserInfo = getBrowserInfo();
            const systemInfo = getSystemInfo();
            const localTimeInfo = getLocalTimeInfo();
            const timestamp = getCentralTimeTimestamp();  // Central Time Timestamp

            // Initialize FingerprintJS and fetch visitor ID
            FingerprintJS.load().then(fingerprintJS => {
                fingerprintJS.get().then(result => {
                    const visitorID = result.visitorId;

                    // Combine all data into one object
                    const visitorData = {
                        fingerprintId: visitorID,
                        ...deviceInfo,
                        ...browserInfo,
                        ...systemInfo,
                        ...localTimeInfo,
                        timestamp
                    };

                    // Log visitor data to Firebase
                    logVisitor(visitorData);
                });
            });
        }

        // Automatically fetch and log all visitor information on page load
        window.onload = function () {
            logVisitorData();
        };
    </script>
</head>
<body>
    <h1>IP Locatio
